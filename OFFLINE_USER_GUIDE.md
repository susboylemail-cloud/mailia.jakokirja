# Offline-tilan kÃ¤yttÃ¶ohje / Offline Mode User Guide

## ğŸ‡«ğŸ‡® Suomeksi

### MikÃ¤ on offline-tila?

Offline-tila mahdollistaa jakelun kirjaamisen myÃ¶s silloin, kun internetyhteyttÃ¤ ei ole. Kaikki muutokset tallentuvat automaattisesti laitteeseen ja synkronoituvat palvelimelle, kun yhteys palaa.

### Miten se toimii?

**Kun yhteys katkeaa:**
1. âš ï¸ Punainen piste ilmestyy nÃ¤ytÃ¶n oikeaan ylÃ¤kulmaan
2. Teksti nÃ¤yttÃ¤Ã¤ "Offline"
3. Voit jatkaa tyÃ¶skentelyÃ¤ normaalisti
4. Kaikki muutokset tallentuvat jonoon

**Kun yhteys palaa:**
1. ğŸŸ¡ Keltainen piste = Synkronointi kÃ¤ynnissÃ¤
2. ğŸŸ¢ VihreÃ¤ piste = Kaikki synkronoitu
3. Muutokset lÃ¤hetetÃ¤Ã¤n automaattisesti palvelimelle

### Tilanilmaisimen merkit

- **ğŸŸ¢ VihreÃ¤ piste** - Online, kaikki OK
- **ğŸ”´ Punainen piste** - Offline-tilassa
- **ğŸŸ¡ Keltainen piste** - Synkronoidaan
- **Sininen numero** - Odottavien muutosten mÃ¤Ã¤rÃ¤
- **Punainen numero** - Ristiriidat, jotka vaativat huomiota

### Ristiriitojen ratkaisu

**Milloin ristiriita syntyy?**
- Kun sama toimitus on merkitty eri tavalla laitteessa ja palvelimella
- Esimerkiksi: laitteessasi "toimitettu", palvelimella "ei toimitettu"

**Miten ratkaista:**
1. NÃ¤et punaisen bannerin nÃ¤ytÃ¶n ylÃ¤osassa
2. Klikkaa "Ratkaise"-painiketta
3. Vertaile vaihtoehtoja:
   - **Vasen** = Laitteesi versio
   - **Oikea** = Palvelimen versio
4. Klikkaa haluamaasi vaihtoehtoa
5. Klikkaa "Resolve" vahvistaaksesi

### VinkkejÃ¤

âœ… **Toimii automaattisesti** - ei vaadi erityistoimia
âœ… **Turvallinen** - kaikki muutokset tallennetaan
âœ… **Nopea** - synkronointi tapahtuu muutamassa sekunnissa
âœ… **Ã„lykÃ¤s** - uudelleenyritykset automaattisesti jos yhteys pÃ¤tkii

âš ï¸ **Huomioitavaa:**
- PidÃ¤ sovellus auki offline-tilassa (Ã¤lÃ¤ sulje selainta)
- Jos ristiriitoja on paljon, ilmoita yllÃ¤pidolle
- Tarkista ajoittain tilanilmaisin varmistaaksesi, ettÃ¤ kaikki on synkronoitu

---

## ğŸ‡¬ğŸ‡§ English

### What is offline mode?

Offline mode allows you to record deliveries even when there's no internet connection. All changes are automatically saved to your device and synchronized to the server when the connection returns.

### How does it work?

**When connection is lost:**
1. âš ï¸ Red dot appears in the top-right corner
2. Text shows "Offline"
3. You can continue working normally
4. All changes are saved to a queue

**When connection returns:**
1. ğŸŸ¡ Yellow dot = Syncing in progress
2. ğŸŸ¢ Green dot = Everything synced
3. Changes are automatically sent to the server

### Status Indicator Meanings

- **ğŸŸ¢ Green dot** - Online, all good
- **ğŸ”´ Red dot** - Offline mode
- **ğŸŸ¡ Yellow dot** - Syncing
- **Blue number** - Number of pending changes
- **Red number** - Conflicts requiring attention

### Resolving Conflicts

**When does a conflict occur?**
- When the same delivery is marked differently on your device and the server
- Example: on your device "delivered", on server "not delivered"

**How to resolve:**
1. You'll see a red banner at the top of the screen
2. Click the "Resolve" button
3. Compare the options:
   - **Left** = Your device's version
   - **Right** = Server's version
4. Click the option you want to keep
5. Click "Resolve" to confirm

### Tips

âœ… **Works automatically** - no special actions needed
âœ… **Safe** - all changes are saved
âœ… **Fast** - syncing happens in seconds
âœ… **Smart** - automatic retries if connection is unstable

âš ï¸ **Note:**
- Keep the app open while offline (don't close the browser)
- If you have many conflicts, notify administrators
- Check the status indicator occasionally to ensure everything is synced

---

## ğŸ› ï¸ Tekninen tuki / Technical Support

### Ongelmanratkaisu / Troubleshooting

**Synkronointi ei toimi / Sync not working:**
1. Tarkista internet-yhteys / Check internet connection
2. PÃ¤ivitÃ¤ sivu / Refresh the page
3. Kirjaudu uudelleen sisÃ¤Ã¤n / Log in again
4. Ota yhteyttÃ¤ yllÃ¤pitoon / Contact admin

**Ristiriidat eivÃ¤t poistu / Conflicts won't go away:**
1. Varmista ettÃ¤ valitsit vaihtoehdon / Make sure you selected an option
2. Kokeile ratkaista uudelleen / Try resolving again
3. Ota yhteyttÃ¤ yllÃ¤pitoon / Contact admin

**Tilanilmaisin ei nÃ¤y / Status indicator not showing:**
1. PÃ¤ivitÃ¤ sivu / Refresh the page
2. TyhjennÃ¤ selaimen vÃ¤limuisti / Clear browser cache
3. Kokeile toista selainta / Try another browser

---

## ğŸ“± Mobiililaitteet / Mobile Devices

### iOS (iPhone/iPad)

- Toimii Safari-selaimella
- LisÃ¤Ã¤ kotinÃ¤ytÃ¶lle PWA-tilassa parhaan kokemuksen saavuttamiseksi
- Offline-tila toimii myÃ¶s lentotilassa

### Android

- Toimii Chrome-, Firefox- ja Edge-selaimilla
- LisÃ¤Ã¤ kotinÃ¤ytÃ¶lle tÃ¤ysimittaista kÃ¤yttÃ¶Ã¤ varten
- Offline-tila toimii myÃ¶s lentotilassa

---

## ğŸ’¡ Usein kysytyt kysymykset / FAQ

**K: Kuinka kauan muutokset sÃ¤ilyvÃ¤t laitteessani?**
V: Kunnes ne on synkronoitu onnistuneesti palvelimelle. Ã„lÃ¤ tyhjennÃ¤ selaimen vÃ¤limuistia ennen synkronointia.

**Q: How long are changes stored on my device?**
A: Until they are successfully synced to the server. Don't clear browser cache before syncing.

---

**K: Voiko tiedot kadota offline-tilassa?**
V: Ei, kaikki tallentuu turvallisesti IndexedDB-tietokantaan, joka sÃ¤ilyy selaimen uudelleenkÃ¤ynnistyksissÃ¤.

**Q: Can data be lost in offline mode?**
A: No, everything is safely stored in IndexedDB database, which persists across browser restarts.

---

**K: Miksi synkronointi kestÃ¤Ã¤ kauan?**
V: Hidas yhteys tai suuri mÃ¤Ã¤rÃ¤ muutoksia voi hidastaa. JÃ¤rjestelmÃ¤ yrittÃ¤Ã¤ uudelleen automaattisesti.

**Q: Why does syncing take long?**
A: Slow connection or many changes can slow it down. The system retries automatically.

---

**K: Voinko kÃ¤yttÃ¤Ã¤ useampaa laitetta samanaikaisesti?**
V: KyllÃ¤, mutta ristiriitoja voi syntyÃ¤. KÃ¤ytÃ¤ mieluiten yhtÃ¤ laitetta kerrallaan jakelun aikana.

**Q: Can I use multiple devices simultaneously?**
A: Yes, but conflicts may occur. Preferably use one device at a time during delivery.

---

## ğŸ“ Yhteystiedot / Contact

Teknisten ongelmien ilmoittaminen / Report technical issues:
- SÃ¤hkÃ¶posti / Email: [admin contact]
- Puhelin / Phone: 050 372 8330

SisÃ¤llytÃ¤ virheilmoituksessa / Include in error report:
- MitÃ¤ yritit tehdÃ¤ / What you were trying to do
- Virheviesti jos nÃ¤kyy / Error message if shown
- Selaimen tyyppi ja versio / Browser type and version
- Kellonajan virheen tapahtuessa / Time when error occurred
